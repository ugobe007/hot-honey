<!DOCTYPE html>
<html>
<head>
  <title>Debug Admin Status</title>
  <style>
    body {
      font-family: monospace;
      background: #1a1a1a;
      color: #00ff00;
      padding: 20px;
      line-height: 1.6;
    }
    h1 { color: #00ffff; }
    .box { background: #2a2a2a; padding: 20px; margin: 20px 0; border: 2px solid #00ff00; border-radius: 10px; }
    .error { color: #ff0000; }
    .success { color: #00ff00; }
    button { 
      background: #00ff00; 
      color: #000; 
      border: none; 
      padding: 15px 30px; 
      font-size: 16px; 
      font-weight: bold; 
      cursor: pointer; 
      margin: 10px 5px;
      border-radius: 5px;
    }
    button:hover { background: #00cc00; }
    pre { background: #000; padding: 15px; overflow-x: auto; border-left: 4px solid #00ff00; }
  </style>
</head>
<body>
  <h1>üîç Admin Status Debugger</h1>
  
  <div class="box">
    <h2>Current Status:</h2>
    <div id="status"></div>
  </div>
  
  <div class="box">
    <h2>localStorage Contents:</h2>
    <pre id="storage"></pre>
  </div>
  
  <div class="box">
    <h2>Actions:</h2>
    <button onclick="forceAdmin()">FORCE ADMIN NOW</button>
    <button onclick="goToDashboard()">Go to Dashboard</button>
    <button onclick="location.reload()">Refresh This Page</button>
  </div>

  <script>
    function checkStatus() {
      const statusDiv = document.getElementById('status');
      const storageDiv = document.getElementById('storage');
      
      // Get all localStorage data
      const userProfile = localStorage.getItem('userProfile');
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      
      // Display storage
      storageDiv.innerHTML = `isLoggedIn: ${isLoggedIn}\n\nuserProfile:\n${userProfile || 'NULL'}`;
      
      // Check admin status
      if (!userProfile) {
        statusDiv.innerHTML = '<p class="error">‚ùå NO USER PROFILE FOUND</p>';
      } else {
        try {
          const profile = JSON.parse(userProfile);
          const isAdmin = profile.isAdmin === true || profile.email === 'admin@hotmoneyhoney.com';
          
          statusDiv.innerHTML = `
            <p>Name: ${profile.name}</p>
            <p>Email: ${profile.email}</p>
            <p>User Type: ${profile.userType}</p>
            <p>isAdmin flag: ${profile.isAdmin}</p>
            <p class="${isAdmin ? 'success' : 'error'}">
              ${isAdmin ? '‚úÖ YOU ARE ADMIN' : '‚ùå YOU ARE NOT ADMIN'}
            </p>
          `;
        } catch (e) {
          statusDiv.innerHTML = '<p class="error">‚ùå ERROR PARSING PROFILE: ' + e.message + '</p>';
        }
      }
    }
    
    function forceAdmin() {
      let profile = localStorage.getItem('userProfile');
      
      if (!profile) {
        // Create new admin profile
        profile = {
          id: 'admin-' + Date.now(),
          name: 'Admin User',
          email: 'admin@hotmoneyhoney.com',
          userType: 'investor',
          description: 'Admin',
          createdAt: new Date().toISOString(),
          isAdmin: true,
          preferences: {
            industries: [],
            filterEnabled: false
          }
        };
        localStorage.setItem('userProfile', JSON.stringify(profile));
        localStorage.setItem('isLoggedIn', 'true');
        alert('‚úÖ Created new admin profile!');
      } else {
        // Update existing
        const parsed = JSON.parse(profile);
        parsed.isAdmin = true;
        parsed.email = 'admin@hotmoneyhoney.com';
        localStorage.setItem('userProfile', JSON.stringify(parsed));
        alert('‚úÖ Updated existing profile to admin!');
      }
      
      checkStatus();
    }
    
    function goToDashboard() {
      window.location.href = '/dashboard';
    }
    
    // Auto-check on load
    checkStatus();
  </script>
</body>
</html>
