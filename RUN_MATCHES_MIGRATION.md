# Create startup_investor_matches Table

## Problem
The app is showing "Database table not found" because the `startup_investor_matches` table doesn't exist in your Supabase database.

## Solution

Run the migration to create the table. You have two options:

### Option 1: Via Supabase Dashboard (Easiest)

1. **Go to Supabase Dashboard:**
   - https://supabase.com/dashboard/project/unkpogyhhjbvxxjvmxlt
   
2. **Navigate to SQL Editor:**
   - Click "SQL Editor" in the left sidebar
   - Click "New Query"

3. **Copy and Paste the Migration:**
   - Open: `migrations/create_startup_investor_matches.sql`
   - Copy the entire contents
   - Paste into the SQL Editor

4. **Run the Query:**
   - Click "Run" (or press Cmd+Enter / Ctrl+Enter)
   - You should see "Success. No rows returned"

5. **Verify:**
   - Go to "Table Editor" in the left sidebar
   - You should now see `startup_investor_matches` in the table list

### Option 2: Via Supabase CLI

If you have Supabase CLI installed:

```bash
cd /Users/leguplabs/Desktop/hot-honey
supabase db push
```

Or manually:

```bash
supabase db execute --file migrations/create_startup_investor_matches.sql
```

## What This Creates

The migration creates:

‚úÖ **Table**: `startup_investor_matches`
- Stores pre-calculated matches between startups and investors
- Generated by the queue processor (`queue-processor-v16.js`)

‚úÖ **Columns**:
- `startup_id` - References `startup_uploads.id`
- `investor_id` - References `investors.id`
- `match_score` - Score from 0-100
- `status` - Match status (suggested, viewed, saved, etc.)
- `reasoning` - Text explanation
- `why_you_match` - Array of match reasons
- Plus tracking fields (viewed_at, contacted_at, etc.)

‚úÖ **Indexes**:
- Fast lookups by startup_id, investor_id
- Efficient queries by match_score and status
- Optimized for the MatchingEngine queries

## After Running Migration

1. **Restart your dev server** (if running)
2. **Generate matches**:
   - The queue processor needs to run to populate matches
   - Check `/admin/dashboard` for queue processor status
   - Or manually run: `npm run match` (if that script exists)

3. **Verify matches exist**:
   - Go to Supabase Dashboard ‚Üí Table Editor ‚Üí `startup_investor_matches`
   - Should show matches if queue processor has run

## Troubleshooting

### Error: "relation startup_uploads does not exist"
- Make sure the `startup_uploads` table exists first
- Check your migrations for that table

### Error: "relation investors does not exist"
- Make sure the `investors` table exists first
- Check your migrations for that table

### Table created but no matches showing
- Matches need to be generated by the queue processor
- Check queue processor logs
- Manually trigger match generation if needed

## Next Steps

After the table is created:
1. ‚úÖ The "Failed to load matches" error should be gone
2. ‚ö†Ô∏è You'll see "No matches available" until matches are generated
3. üîÑ Run the queue processor to generate initial matches

