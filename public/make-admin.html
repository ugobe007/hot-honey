<!DOCTYPE html>
<html>
<head>
  <title>Make Admin</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: linear-gradient(135deg, #6b21a8, #86efac);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
    }
    .box {
      background: white;
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 600px;
    }
    h1 { color: #6b21a8; }
    button {
      background: linear-gradient(135deg, #f97316, #ef4444);
      color: white;
      border: none;
      padding: 20px 40px;
      border-radius: 15px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      margin: 10px;
    }
    button:hover { transform: scale(1.05); }
    .status { padding: 20px; border-radius: 10px; margin: 20px 0; font-weight: bold; }
    .success { background: #86efac; color: #166534; }
    .error { background: #fecaca; color: #991b1b; }
    pre { background: #f3f4f6; padding: 15px; border-radius: 10px; text-align: left; overflow-x: auto; }
  </style>
</head>
<body>
  <div class="box">
    <h1>üîß Admin Access</h1>
    <div id="status"></div>
    <div id="actions"></div>
  </div>

  <script>
    function checkAndDisplay() {
      const statusDiv = document.getElementById('status');
      const actionsDiv = document.getElementById('actions');
      
      // Check localStorage
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      const userProfile = localStorage.getItem('userProfile');
      
      console.log('isLoggedIn:', isLoggedIn);
      console.log('userProfile:', userProfile);
      
      if (!userProfile) {
        statusDiv.innerHTML = '<div class="status error">‚ùå No user profile found</div>';
        actionsDiv.innerHTML = `
          <p>Let me create a profile for you:</p>
          <button onclick="createProfile()">Create Profile & Make Admin</button>
          <p style="margin-top: 20px;">Or:</p>
          <button onclick="window.location.href='/signup'">Go to Sign Up Page</button>
        `;
        return;
      }
      
      const profile = JSON.parse(userProfile);
      const isAdmin = profile.isAdmin || profile.email === 'admin@hotmoneyhoney.com';
      
      statusDiv.innerHTML = `
        <div class="status ${isAdmin ? 'success' : 'error'}">
          ${isAdmin ? '‚úÖ You ARE an admin!' : '‚ö†Ô∏è You are NOT an admin yet'}
        </div>
        <pre>${JSON.stringify(profile, null, 2)}</pre>
      `;
      
      if (isAdmin) {
        actionsDiv.innerHTML = `
          <button onclick="window.location.href='/dashboard'">Go to Dashboard</button>
          <button onclick="window.location.href='/admin/bulk-upload'">Go to Bulk Upload</button>
        `;
      } else {
        actionsDiv.innerHTML = `
          <button onclick="makeAdmin()">‚ú® Make Me Admin NOW</button>
        `;
      }
    }
    
    function createProfile() {
      const newProfile = {
        id: 'user-' + Date.now(),
        name: 'Admin User',
        email: 'admin@hotmoneyhoney.com',
        userType: 'investor',
        description: 'Admin account',
        createdAt: new Date().toISOString(),
        isAdmin: true,
        preferences: {
          industries: [],
          filterEnabled: false
        }
      };
      
      localStorage.setItem('userProfile', JSON.stringify(newProfile));
      localStorage.setItem('isLoggedIn', 'true');
      
      alert('‚úÖ Admin profile created!');
      checkAndDisplay();
    }
    
    function makeAdmin() {
      const profile = JSON.parse(localStorage.getItem('userProfile'));
      profile.isAdmin = true;
      localStorage.setItem('userProfile', JSON.stringify(profile));
      
      alert('‚úÖ You are now an admin!');
      window.location.href = '/dashboard';
    }
    
    // Run on load
    checkAndDisplay();
  </script>
</body>
</html>
